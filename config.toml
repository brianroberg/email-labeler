[daemon]
poll_interval_seconds = 60
max_emails_per_cycle = 10
gmail_query = "in:inbox -label:agent/processed"
max_thread_chars = 50000
cloud_parallel = 2
local_parallel = 1
healthcheck_file = "/tmp/healthcheck"

[labels]
needs_response = "agent/needs-response"
fyi = "agent/fyi"
low_priority = "agent/low-priority"
processed = "agent/processed"
personal = "agent/personal"
non_personal = "agent/non-personal"

[labels.actions]
needs_response = "inbox"
fyi = "inbox"
low_priority = "archive"

[llm.cloud]
model = "zai-org/glm-5"
max_tokens = 1024
temperature = 0
timeout = 60

[llm.local]
model = "qwen3-coder-30b-a3b-instruct-mlx"
max_tokens = 1024
temperature = 0
timeout = 180
# Optional: extra fields merged into every API request body.
# See README for examples (e.g. disabling thinking for reasoning models).
# [llm.local.extra_body]
# enable_thinking = false

[prompts.sender_classification]
system = """You are an email classifier. Your job is to determine whether an email is from a real person or from an automated service/company.

Classify the sender as one of:
- PERSON: A real human being writing a personal or professional email (colleagues, friends, family, business contacts)
- SERVICE: An automated email, newsletter, marketing, notification, receipt, shipping update, social media notification, or any email from a company/service

Respond with ONLY one word: PERSON or SERVICE

Think about it carefully before answering. Use <think> tags to reason about the sender, then give your final answer."""

user_template = """From: {sender}
Subject: {subject}
Preview: {snippet}"""

[vip_senders]
# VIP addresses come from VIP_SENDERS env var (comma-separated).
# These are always classified as PERSON (skips sender LLM call)
# and restricted to VIP-only categories (skips low-priority).
categories = ["NEEDS_RESPONSE", "FYI"]

[prompts.email_classification]
preamble = """You are an email classifier. Based on the full email content, classify it into exactly one of three categories.

Use this decision process:
1. Does this email require {env.USER_NAME} to respond, take action, or make a decision? If yes → NEEDS_RESPONSE
2. Is this email worth reading for awareness, even though no action is required? If yes → FYI
3. Otherwise → LOW_PRIORITY

Important: Unsolicited outreach from unfamiliar senders — including sales pitches, partnership proposals, cold introductions, and requests to "hop on a call" from people {env.USER_NAME} does not know — is LOW_PRIORITY, even if it contains a question or call to action.

Categories:"""

postamble = """Think step by step before answering. Use <think> tags to reason about the email:
1. Who is this from? Is this someone {env.USER_NAME} likely knows or works with?
2. Is there a specific action or response needed from {env.USER_NAME}?
3. If no action is needed, is the content worth reading for situational awareness?

Then give your final answer: NEEDS_RESPONSE, FYI, or LOW_PRIORITY"""

user_template = """From: {sender}
Subject: {subject}
Thread transcript:
{body}"""

[prompts.email_classification.categories]
NEEDS_RESPONSE = "The email requires a reply, decision, or action from {env.USER_NAME}. Examples: direct questions from colleagues or contacts, meeting requests, invitations needing RSVP, requests for information or approval. Note: 'Let me know if you have any questions' (or similar) does not by itself require a response. Cold emails and sales pitches do NOT qualify, even if they ask a question."
FYI = "The email is informational and worth reading but requires no action. Examples: status updates from colleagues, team announcements, shared articles from contacts, policy updates, organizational news, event recaps, forwarded information relevant to {env.USER_NAME}'s work."
LOW_PRIORITY = "The email has low importance or is unwanted. Examples: marketing newsletters, automated notifications, social media digests, promotional offers, spam, unsolicited sales or partnership pitches, cold outreach, phishing attempts, subscription digests. Anything that does not need to be read."
