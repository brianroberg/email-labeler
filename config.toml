[daemon]
poll_interval_seconds = 60
max_emails_per_cycle = 10
gmail_query = "in:inbox -label:agent/processed"
max_thread_chars = 50000
healthcheck_file = "/tmp/healthcheck"

[labels]
needs_response = "agent/needs-response"
fyi = "agent/fyi"
low_priority = "agent/low-priority"
unwanted = "agent/unwanted"
processed = "agent/processed"
would_have_deleted = "agent/would-have-deleted"
personal = "agent/personal"
non_personal = "agent/non-personal"

[labels.actions]
needs_response = "inbox"
fyi = "inbox"
low_priority = "archive"
unwanted = "archive"

[labels.extra_labels]
unwanted = ["agent/would-have-deleted"]

[llm.cloud]
model = "deepseek/deepseek-v3.2"
max_tokens = 8096
temperature = 0.2
timeout = 60

[llm.local]
model = "qwen/qwen3-32b"
max_tokens = 8096
temperature = 0.2
timeout = 180

[prompts.sender_classification]
system = """You are an email classifier. Your job is to determine whether an email is from a real person or from an automated service/company.

Classify the sender as one of:
- PERSON: A real human being writing a personal or professional email (colleagues, friends, family, business contacts)
- SERVICE: An automated email, newsletter, marketing, notification, receipt, shipping update, social media notification, or any email from a company/service

Respond with ONLY one word: PERSON or SERVICE

Think about it carefully before answering. Use <think> tags to reason about the sender, then give your final answer."""

user_template = """From: {sender}
Subject: {subject}
Preview: {snippet}"""

[vip_senders]
# VIP addresses come from VIP_SENDERS env var (comma-separated).
# These are always classified as PERSON (skips sender LLM call)
# and restricted to VIP-only categories (skips low-priority/unwanted).
categories = ["NEEDS_RESPONSE", "FYI"]

[prompts.email_classification]
preamble = "You are an email classifier. Based on the full email content, classify it into exactly one category:"
postamble = "Think about it carefully before answering. Use <think> tags to reason about the email, then give your final answer."

user_template = """From: {sender}
Subject: {subject}
Thread transcript:
{body}"""

[prompts.email_classification.categories]
NEEDS_RESPONSE = "The email requires a reply or action from the recipient. Questions directed the recipient, meeting requests with the recipient, invitations needing RSVP by the recipient, requests for information from the recipient. Note: the statement, 'Let me know if you have any questions' (or similar) does not by itself constitute a need to respond."
FYI = "The email is informational and worth reading but requires no action. Status updates from people, shared articles from contacts, announcements you should know about."
LOW_PRIORITY = "The email has low importance. Marketing newsletters you subscribed to, routine automated notifications, social media digests, promotional offers you might occasionally want."
UNWANTED = "The email is unwanted. Spam, unsolicited marketing, invitations to review services or products, offers to initiate new business relationships (i.e. cold emails), phishing attempts, repeated promotional emails."
